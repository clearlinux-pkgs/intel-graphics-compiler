From a72d38615e8d29d8c0f7d6ef083866bdf19b9f6a Mon Sep 17 00:00:00 2001
From: Kevron Rees <kevron.m.rees@intel.com>
Date: Wed, 13 Mar 2019 10:43:39 -0700
Subject: [PATCH] fix dependecy on ElfPackager

---
 IGC/BiFModule/resource_embedder.py | 2 +-
 IGC/CMakeLists.txt                 | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/IGC/BiFModule/resource_embedder.py b/IGC/BiFModule/resource_embedder.py
index 1a23213..d47f6a8 100644
--- a/IGC/BiFModule/resource_embedder.py
+++ b/IGC/BiFModule/resource_embedder.py
@@ -76,7 +76,7 @@ try:
 
 
     try:
-        outFile = open(sys.argv[2], 'wb')
+        outFile = open(sys.argv[2], 'w')
     except EnvironmentError as ex:
         sys.stderr.write('ERROR: Cannot create/open output file "{0}".\n       {1}.\n'.format(sys.argv[2], ex.strerror))
         exit(1)
diff --git a/IGC/CMakeLists.txt b/IGC/CMakeLists.txt
index 3a0657c..4831e63 100644
--- a/IGC/CMakeLists.txt
+++ b/IGC/CMakeLists.txt
@@ -55,7 +55,7 @@ if(POLICY CMP0058)
     cmake_policy(SET CMP0058 NEW)
 endif()
 
-
+cmake_policy(SET CMP0046 NEW)
 
 # ======================================================================================================
 # ================================================ UTILS ===============================================
@@ -3533,7 +3533,7 @@ add_library("${IGC_BUILD__PROJ__igc_dll}" SHARED
     ${IGC_BUILD__RES__IGC__fcl_dll}
   )
 
-add_dependencies("${IGC_BUILD__PROJ__igc_dll}" "${IGC_BUILD__PROJ_NAME_PREFIX}ElfPackager")
+add_dependencies("${IGC_BUILD__PROJ__igc_dll}" "${IGC_BUILD__PROJ__ElfPackager}")
   
 target_include_directories(${IGC_BUILD__PROJ__igc_dll} INTERFACE
   "${CMAKE_CURRENT_SOURCE_DIR}/AdaptorOCL/ocl_igc_shared"
-- 
2.21.0

